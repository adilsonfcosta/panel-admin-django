{% if groups %}
<table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
        <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Nome
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Usuários
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Permissões
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Ações
            </th>
        </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
        {% for group in groups %}
        <tr>
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900">{{ group.name }}</div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900">{{ group.user_set.count }}</div>
            </td>
            <td class="px-6 py-4">
                <div class="text-sm text-gray-900">
                    {% for permission in group.permissions.all|slice:":5" %}
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 mr-1 mb-1">
                        {{ permission.name }}
                    </span>
                    {% endfor %}
                    {% if group.permissions.count > 5 %}
                    <span class="text-xs text-gray-500">+ {{ group.permissions.count|add:"-5" }} mais</span>
                    {% endif %}
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <div class="flex space-x-2">
                    {% if perms.auth.change_group %}
                    <a href="{% url 'accounts:group_edit' pk=group.pk %}" class="text-indigo-600 hover:text-indigo-900">
                        Editar
                    </a>
                    {% endif %}
                    
                    {% if perms.auth.delete_group %}
                    <a href="{% url 'accounts:group_delete' pk=group.pk %}" class="text-red-600 hover:text-red-900" 
                       onclick="return confirm('Tem certeza que deseja excluir este grupo?');">
                        Excluir
                    </a>
                    {% endif %}
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="p-6 text-center text-gray-500">
    <p>Nenhum grupo encontrado.</p>
</div>
{% endif %}